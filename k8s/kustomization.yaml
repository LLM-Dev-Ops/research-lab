---
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# Namespace
namespace: llm-research-lab

# Resources
resources:
  # Namespace
  - namespace.yaml

  # Configuration
  - configmap.yaml
  - secrets.yaml

  # Application
  - deployment.yaml
  - service.yaml
  - ingress.yaml
  - hpa.yaml
  - pdb.yaml

  # Databases
  - postgres-statefulset.yaml
  - clickhouse-statefulset.yaml

  # Storage & Cache
  - minio-deployment.yaml
  - redis-deployment.yaml

# Common Labels
commonLabels:
  app.kubernetes.io/managed-by: kustomize
  app.kubernetes.io/part-of: llm-research-lab

# Images (override for different environments)
images:
  - name: llm-research-lab
    newName: llm-research-lab
    newTag: latest

# ConfigMap Generator (for generating configmaps from files)
# configMapGenerator:
#   - name: app-env-config
#     files:
#       - config/production.env

# Secret Generator (for generating secrets from files)
# secretGenerator:
#   - name: app-secrets
#     files:
#       - config/secrets.env

# Replicas (can be overridden per environment)
# replicas:
#   - name: llm-research-lab
#     count: 3

# Patches (for environment-specific customizations)
# patches:
#   - path: patches/production-resources.yaml
#     target:
#       kind: Deployment
#       name: llm-research-lab
